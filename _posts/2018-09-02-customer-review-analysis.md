---
#layout: post
title: Tackling Customer Churn
dark: False
image:
      url: /media/2018-09-02-customer-review-analysis/cover.jpg
---
## Intro:  
It always baffled me why companies would rather focus so much on new sales instead of working on customer retention. One of the main excuses in the past was lack of data, while nowadays companies struggle with too much data and lack of talent able to process it.

## Motivation:
Throughout my career as an analyst, I worked closely with sales executives and account managers all over Europe to better understand their processes and struggles.  
Based on those experiences, I believe that "landing" a new customer requires much more resources and time than retaining an existing customer does. Therefore, with this project I intend to explore ways to assist companies with managing customer churn using NLP and unsupervised learning techniques.

## Dataset:
I decided to use a dataset from Twitter containing 14,885 tweets tagging different US airlines, I was lucky enough to find a ready-to-use dataset available in an SQLite database format. I could have used Twitter API to retrieve the data, but since I am "fluent" in SQL, this approach gave me more time to actually work on analysis and modelling rather than interacting with Twitter API to get my data.

## Approach:  
I started off with exploring the dataset and dropping columns that I did not need. That was the easy part...  
As you may already know, one of the most time consuming tasks in any data science project is cleaning and "massaging" the data, my project was no exception. I ended up removing the following elements from each tweet:
* Tags (@airline)
* Hashtags
* Codes and numbers
* Urls
* Locations
* Months
* Emojis
* Airport codes (with some help from Aviation Edge API)

**Finally, I was able to start the fun part!**  
For sentiment analysis I tried out an external API, which was great at detecting the sentiment of one-off tweets, but passing my 14,885 records through it was not something the API liked very much...  
Eventually I ended up using a combination of two NLTK packages - TextBlob and Vader Sentiment Analyzer - to assign a positive, neutral or negative emotion to each tweet.  
Before starting the modelling part, I filtered only on the negative tweets, since those are the ones I am really interested in.  

**Modelling**  
I played around with many different combinations of word vectorizer + dimensionality reduction techniques, namely:

* Count vectorizer with LSA
* Count vectorizer with NMF
* Count vectorizer with PCA
* Count vectorizer with LDA
* TF-IDF with LSA
* TF-IDF with PCA
* TF-IDF with LDA

Long story short, Count Vectorizer with NMF generated the most logical separation of and the least overlap between the topics.  
At this point, I was ready to fit a KMeans machine learning algorithm with the vectorized data and cluster my tweets (below you can see what the clusters looked like, projected on 2 dimensional space *(please don't try to interpret the axes)*.

![tSNE Chart is  Missing]({{"/assets/images/tSNE.png"|https://github.com/mastaus/mastaus.github.io/blob/master/assets/images/tSNE.png}})

Despite the large cluster of gold-ish colour at the top, we can clearly see other smaller groups of tweets, which is awesome! This means that my model is able to distinguish tweets of different topics.  
As a final step, I assigned an action to each category (cluster) and created a simple recommendation engine that incorporates my sentiment analyzer, vectorizer and clustering algorithm to generate an action recommendation that should, eventually, help reduce airline's customer churn (or that's the idea anyway :smirk:).

## Results:

Here are some of of the suggestion examples generated by my model:

| Original Tweet | Generated Suggestion |
| --- | --- |
| @AmericanAir thank you so much that helps a lot | Keep up the good work! :thumbsup: |
| @United I have never had such a horrible customer service | Please Improve Customer Service Rep Training :disappointed: |
| @united and most frustratingly, all this delay happened either at the gate, or even onboard the aircraft! No heads up in advance!!! | Please Improve Your Scheduling :clock4: |
| @USAirways but my bag is still missing | Please Pay More Attention at Baggage Handling :handbag: |

**To Summarize**  
During the 2 weeks allocated to this project, I was able to create a model that did a pretty good job with:
1. Sentiment analysis (especially picking out negative tweets)
2. Identified tweets mentioning Customer Service, Baggage Loss, Weather and Missed Connection
3. Recommending general action

If I was going to continue working on this model, I would like to focus on:
* Further improving sentiment assignment
* Excluding more non-informative words before vectorizing the tweets to help the algorithm to generalize better and separate the large cluster (visible in the tSNE plot above)
* Identifying sarcasm *(for which techniques like attentions or neural networks would be needed)*
* Looking at conversations that than treating individual tweets as independent
* Increasing the amount of data

## The Product:
If you would like to see my code or play around with the model itself, checkout my [GitHub page](https://github.com/mastaus/metis_projects/tree/master/Customer_Review_Sentiment_Analysis).   
If you would like to see my final presentation [click here](https://docs.google.com/presentation/d/1vujt1nUujZhxO9sOIcOq_xRqCz9yZEpKgTLrze6L8Sw/edit#slide=id.p).  

### I hope you enjoyed this post. Look out for the next post on my Passion Project @Metis!
